[gcode_macro print_start]
default_parameter_EXTRUDER: 260
default_parameter_BED: 110
gcode:
    print_reset
    M140 S{BED}         # set bed temp, don't wait
    M109 S{EXTRUDER}    # set extruder temp, wait
    M190 S{BED}         # set bed temp, wait

    G28                 # home axis
    BED_MESH_CALIBRATE  # calibrate mesh
    DETACH_PROBE        # make sure probe is detached due to delayed_detach
    
    purge TEMPERATURE={EXTRUDER} # purge

[gcode_macro print_reset]
gcode:
    M104 S0      # turn off bed
	M107         # turn off part fans
	G90          # use absolute coordinates
	M83	         # use relative extrusion
	G92 E0.0     # reset e count

[gcode_macro print_end]
gcode:
    G91                 # Relative positioning
    G1 E-2 F2700        # Retract a bit
    G1 E-2 Z0.2 F2400   # Retract and raise Z
    G1 X5 Y5 F3000      # Wipe out
    G1 Z10              # Raise Z more
    G90                 # Absolute positinning

    G1 X0 Y150  # Move Toolhead Away
    M106 S0     # Turn-off fan
    M104 S0     # Turn-off hotend
    M140 S0     # Turn-off bed

    M84     # Motors off